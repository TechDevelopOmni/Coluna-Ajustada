import{T as b,j as e,r as n}from"./index-C607L3NO.js";import{c as u}from"./classNames-BXHP0mo8.js";import{c as Z}from"./cloneDeep-SyEe5GSS.js";import{B as _}from"./Button-BGNlWC2q.js";import{C as q}from"./CloseButton-BXcBQvwe.js";import{t as Q,N as W}from"./toast-CDPb8hdy.js";function X(t){return b({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.85 4.44l-3.28-3.3-.35-.14H2.5l-.5.5V7h1V2h6v3.5l.5.5H13v1h1V4.8l-.15-.36zM10 5V2l3 3h-3zM2.5 8l-.5.5v6l.5.5h11l.5-.5v-6l-.5-.5h-11zM13 13v1H3V9h10v4zm-8-1h-.32v1H4v-3h1.06c.75 0 1.13.36 1.13 1a.94.94 0 0 1-.32.72A1.33 1.33 0 0 1 5 12zm-.06-1.45h-.26v.93h.26c.36 0 .54-.16.54-.47 0-.31-.18-.46-.54-.46zM9 12.58a1.48 1.48 0 0 0 .44-1.12c0-1-.53-1.46-1.6-1.46H6.78v3h1.06A1.6 1.6 0 0 0 9 12.58zm-1.55-.13v-1.9h.33a.94.94 0 0 1 .7.25.91.91 0 0 1 .25.67 1 1 0 0 1-.25.72.94.94 0 0 1-.69.26h-.34zm4.45-.61h-.97V13h-.68v-3h1.74v.55h-1.06v.74h.97v.55z"},child:[]}]})(t)}function ee(t){return b({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 1h11l.5.5v5l-.15.35-.85.86v6.79l-.5.5h-10l-.5-.5v-13l.5-.5zM6 2H5v2h1V2zm0 12h4V7.68l-.85-.85L9 6.47V2H7v2.5l-.5.5H6v1H5V5h-.5L4 4.5V2H3v12h2v-1h1v1zm0-2v1h1v-1H6zm0-1v1H5v-1h1zm0-1h1v1H6v-1zm0-1v1H5V9h1zm0-1h1v1H6V8zm0-1v1H5V7h1zm0 0h1V6H6v1zm6.15.15l.85-.86V2h-3v4.27l.85.85.15.35V14h1V7.5l.15-.35z"},child:[]}]})(t)}function le(t){return b({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M13.71 4.29l-3-3L10 1H4L3 2v12l1 1h9l1-1V5l-.29-.71zM13 14H4V2h5v4h4v8zm-3-9V2l3 3h-3z"},child:[]}]})(t)}const se=1e3,te=t=>Math.round(t/se),V=({children:t})=>e.jsx("span",{className:"text-3xl heading-text",children:t}),U=t=>{const{file:o,children:m,className:h}=t,{type:i,name:a,size:c}=o,v=()=>i.split("/")[0]==="image"?e.jsx("img",{className:"upload-file-image",src:URL.createObjectURL(o),alt:`file preview ${a}`}):i==="application/zip"?e.jsx(V,{children:e.jsx(ee,{})}):i==="pdf"?e.jsx(V,{children:e.jsx(X,{})}):e.jsx(V,{children:e.jsx(le,{})});return e.jsxs("div",{className:u("upload-file",h),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"upload-file-thumbnail",children:v()}),e.jsxs("div",{className:"upload-file-info",children:[e.jsx("h6",{className:"upload-file-name text-sm font-bold",children:a}),e.jsxs("span",{className:"upload-file-size",children:[te(c)," kb"]})]})]}),m]})};U.displayName="UploadFileItem";const M=t=>Object.keys(t).map(o=>t[o]),ae=n.forwardRef((t,o)=>{const{accept:m,beforeUpload:h,disabled:i=!1,draggable:a=!1,fileList:c=[],fileListClass:v,fileItemClass:H,multiple:O,onChange:g,onFileRemove:x,showList:R=!0,tip:D,uploadLimit:f,children:j,className:I,...C}=t,F=n.useRef(null),[d,z]=n.useState(c),[B,N]=n.useState(!1);n.useEffect(()=>{JSON.stringify(d)!==JSON.stringify(c)&&z(c)},[JSON.stringify(c)]);const y=(s="")=>{Q.push(e.jsx(W,{type:"danger",duration:2e3,children:s||"Upload Failed!"}),{placement:"top-center"})},L=(s,l)=>{if(s)for(const r of s)l.push(r);return l},w=s=>{let l=Z(d);return typeof f=="number"&&f!==0&&Object.keys(l).length>=f?(f===1&&(l.shift(),l=L(s,l)),M({...l})):(l=L(s,l),M({...l}))},E=s=>{const{files:l}=s.target;let r=!0;if(h){if(r=h(l,d),r===!1){y();return}if(typeof r=="string"&&r.length>0){y(r);return}}if(r){const p=w(l);z(p),g==null||g(p,d)}},S=s=>{const l=d.filter((r,p)=>p!==s);z(l),x==null||x(l)},T=s=>{var l;i||(l=F.current)==null||l.click(),s.stopPropagation()},A=()=>!a&&!j?e.jsx(_,{disabled:i,onClick:s=>s.preventDefault(),children:"Upload"}):a&&!j?e.jsx("span",{children:"Choose a file or drag and drop here"}):j,J=n.useCallback(()=>{a&&N(!1)},[a]),P=n.useCallback(()=>{a&&!i&&N(!0)},[a,i]),$=n.useCallback(()=>{a&&N(!1)},[a]),G={onDragLeave:J,onDragOver:P,onDrop:$},k="border-primary",K=u("upload",a&&"upload-draggable",a&&!i&&`hover:${k}`,a&&i&&"disabled",B&&k,I),Y=u("upload-input",a&&"draggable");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:o,className:K,...a?G:{onClick:T},...C,children:[e.jsx("input",{ref:F,className:Y,type:"file",disabled:i,multiple:O,accept:m,title:"",value:"",onChange:E,...C}),A()]}),D,R&&e.jsx("div",{className:u("upload-file-list",v),children:d.map((s,l)=>e.jsx(U,{file:s,className:H,children:e.jsx(q,{className:"upload-file-remove",onClick:()=>S(l)})},s.name+l))})]})});ae.displayName="Upload";export{ae as U};
