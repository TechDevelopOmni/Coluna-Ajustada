import{r as g,j as e,i as A,K as S,B as F}from"./index-C607L3NO.js";import{B as f}from"./Button-BGNlWC2q.js";import{t as v,N}from"./toast-CDPb8hdy.js";import{a as u,C as m,I as p,z as l,u as L,t as M,F as D}from"./index-BsyKxmTm.js";import{C as q,D as E,B as I}from"./DoubleSidedImage-BIlM7hJ2.js";import{C as x}from"./Card-1HCxGsWA.js";import{S as b,O as w,c as B}from"./Select-BFKD9t5_.js";import{A as h}from"./index-Dw6USHNV.js";import{N as T}from"./NumericInput-B59N_2AO.js";import{c as C}from"./countries.constant-ZY8wRTuX.js";import{U as V}from"./Upload-BIQuS-bs.js";import"./Alert-BXBHSJBB.js";import"./Badge-BxvBSlDX.js";import"./Calendar-CkAzg2vL.js";import"./index-Bx-NXTjJ.js";import"./index-D4zY1Rvn.js";import"./Dialog-B2uIaC1M.js";import"./Drawer-BmNDlxuy.js";import"./index-DyvKvQJa.js";import{u as $}from"./toString-Bwyjzsoc.js";import"./index-BXJiQU6B.js";import"./index-DXXL45do.js";import"./Skeleton-CPq9P_U5.js";import"./Progress-ClvhNQQE.js";import"./index-B4H2RX6Q.js";import"./ScrollBar-BqfB9u64.js";import"./index-C99I0zxJ.js";import{f as k}from"./CloseButton-BXcBQvwe.js";import{S as y}from"./Switcher-B1kKIXFw.js";import"./index-xBh2-DTE.js";import"./index-C1K2VtEp.js";import"./Tag-BbGzO40G.js";import{C as P}from"./ConfirmDialog-DSnV0zd4.js";import{s as R}from"./sleep-BvINh1mj.js";import"./classNames-BXHP0mo8.js";import"./useTimeout-5mLzQ-yb.js";import"./StatusIcon-CIHdvxDX.js";import"./isNil-C1sdKuru.js";import"./index-C0Bidem1.js";import"./useUniqueId-Dupj_QGJ.js";import"./uniqueId-h1-Q-Q6x.js";import"./useMergeRef-DOQ7ycPl.js";import"./react-number-format.es-DctIRRPE.js";import"./cloneDeep-SyEe5GSS.js";import"./_getPrototype-DgXCYaqH.js";import"./useControllableState-Z-3G6vqG.js";import"./index-Bx_zRB3i.js";import"./useUncertainRef-Cr4JDrTD.js";import"./index-DQXJF41S.js";const{Control:U}=B,z=r=>e.jsx(w,{...r,customLabel:s=>e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(h,{shape:"circle",size:20,src:`/img/countries/${s.value}.png`}),e.jsx("span",{children:s.dialCode})]})}),J=({children:r,...s})=>{const a=s.getValue()[0];return e.jsxs(U,{...s,children:[a&&e.jsx(h,{className:"ltr:ml-4 rtl:mr-4",shape:"circle",size:20,src:`/img/countries/${a.value}.png`}),r]})},H=({control:r,errors:s})=>{var o,c,d,i;const a=g.useMemo(()=>JSON.parse(JSON.stringify(C)).map(n=>(n.label=n.dialCode,n)),[]);return e.jsxs(x,{children:[e.jsx("h4",{className:"mb-6",children:"Cadastrar Quiropraxista"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Nome",invalid:!!s.firstName,errorMessage:(o=s.firstName)==null?void 0:o.message,children:e.jsx(m,{name:"firstName",control:r,render:({field:t})=>e.jsx(p,{type:"text",autoComplete:"off",placeholder:"Nome",...t})})}),e.jsx(u,{label:"Sobrenome",invalid:!!s.lastName,errorMessage:(c=s.lastName)==null?void 0:c.message,children:e.jsx(m,{name:"lastName",control:r,render:({field:t})=>e.jsx(p,{type:"text",autoComplete:"off",placeholder:"Sobrenome",...t})})})]}),e.jsx(u,{label:"Email",invalid:!!s.email,errorMessage:(d=s.email)==null?void 0:d.message,children:e.jsx(m,{name:"email",control:r,render:({field:t})=>e.jsx(p,{type:"email",autoComplete:"off",placeholder:"Email",...t})})}),e.jsxs("div",{className:"flex items-end gap-4 w-full",children:[e.jsxs(u,{invalid:!!s.phoneNumber||!!s.dialCode,children:[e.jsx("label",{className:"form-label mb-2",children:"Numero de Celular"}),e.jsx(m,{name:"dialCode",control:r,render:({field:t})=>e.jsx(b,{options:a,...t,className:"w-[150px]",components:{Option:z,Control:J},placeholder:"+55",value:a.filter(n=>n.dialCode===t.value),onChange:n=>t.onChange(n==null?void 0:n.dialCode)})})]}),e.jsx(u,{className:"w-full",invalid:!!s.phoneNumber||!!s.dialCode,errorMessage:(i=s.phoneNumber)==null?void 0:i.message,children:e.jsx(m,{name:"phoneNumber",control:r,render:({field:t})=>e.jsx(T,{autoComplete:"off",placeholder:"Numero de Celular",value:t.value,onChange:t.onChange,onBlur:t.onBlur})})})]})]})},{Control:K}=B,Q=r=>e.jsx(w,{...r,customLabel:(s,a)=>e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(h,{shape:"circle",size:20,src:`/img/countries/${s.value}.png`}),e.jsx("span",{children:a})]})}),G=({children:r,...s})=>{const a=s.getValue()[0];return e.jsxs(K,{...s,children:[a&&e.jsx(h,{className:"ltr:ml-4 rtl:mr-4",shape:"circle",size:20,src:`/img/countries/${a.value}.png`}),r]})},W=({control:r,errors:s})=>{var a,o,c,d;return e.jsxs(x,{children:[e.jsx("h4",{className:"mb-6",children:"Endereço"}),e.jsx(u,{label:"Pais",invalid:!!s.country,errorMessage:(a=s.country)==null?void 0:a.message,children:e.jsx(m,{name:"country",control:r,render:({field:i})=>e.jsx(b,{options:C,...i,components:{Option:Q,Control:G},placeholder:"Brasil",value:C.filter(t=>t.value===i.value),onChange:t=>i.onChange(t==null?void 0:t.value)})})}),e.jsx(u,{label:"Endereço",invalid:!!s.address,errorMessage:(o=s.address)==null?void 0:o.message,children:e.jsx(m,{name:"address",control:r,render:({field:i})=>e.jsx(p,{type:"text",autoComplete:"off",placeholder:"Rua...",...i})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Cidade",invalid:!!s.city,errorMessage:(c=s.city)==null?void 0:c.message,children:e.jsx(m,{name:"city",control:r,render:({field:i})=>e.jsx(p,{type:"text",autoComplete:"off",placeholder:"Cidade",...i})})}),e.jsx(u,{label:"Cep",invalid:!!s.postcode,errorMessage:(d=s.postcode)==null?void 0:d.message,children:e.jsx(m,{name:"postcode",control:r,render:({field:i})=>e.jsx(p,{type:"text",autoComplete:"off",placeholder:"Cep",...i})})})]})]})},X=[{value:"Residente",label:"Residente"},{value:"Folgista",label:"Folgista"},{value:"Temporário",label:"Temporário"}],Y=({control:r})=>e.jsxs(x,{children:[e.jsx("h4",{className:"mb-2",children:"Tipo de Atuação"}),e.jsx("div",{className:"mt-6",children:e.jsx(m,{name:"tags",control:r,render:({field:s})=>e.jsx(b,{isMulti:!0,isClearable:!0,placeholder:"Add tags for customer...",componentAs:q,options:X,onChange:a=>s.onChange(a)})})})]}),Z=({control:r})=>{const s=a=>{let o=!0;const c=["image/jpeg","image/png"];if(a)for(const d of a)c.includes(d.type)||(o="Please upload a .jpeg or .png file!");return o};return e.jsxs(x,{children:[e.jsx("h4",{className:"mb-6",children:"Foto"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg text-center p-4",children:e.jsx("div",{className:"text-center",children:e.jsx(m,{name:"img",control:r,render:({field:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center",children:a.value?e.jsx(h,{size:100,className:"border-4 border-white bg-gray-100 text-gray-300 shadow-lg",icon:e.jsx(k,{}),src:a.value}):e.jsx(E,{src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png",alt:"Upload image"})}),e.jsx(V,{showList:!1,uploadLimit:1,beforeUpload:s,onChange:o=>{o.length>0&&a.onChange(URL.createObjectURL(o[0]))},children:e.jsx(f,{variant:"solid",className:"mt-4",type:"button",children:"Carrregar Imagem"})})]})})})})]})},_=({control:r})=>e.jsxs(x,{children:[e.jsx("h4",{children:"Account"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(u,{children:e.jsx(m,{name:"banAccount",control:r,render:({field:s})=>e.jsxs("div",{className:"flex items-center justify-between gap-8",children:[e.jsxs("div",{children:[e.jsx("h6",{children:"Banned"}),e.jsx("p",{children:"Disable this account"})]}),e.jsx(y,{checked:s.value,onChange:a=>{s.onChange(a)}})]})})}),e.jsx(u,{className:"mb-0",children:e.jsx(m,{name:"accountVerified",control:r,render:({field:s})=>e.jsxs("div",{className:"flex items-center justify-between gap-8",children:[e.jsxs("div",{children:[e.jsx("h6",{children:"Account Verified"}),e.jsx("p",{children:"Disabling sends a verification request to the customer."})]}),e.jsx(y,{checked:s.value,onChange:a=>{s.onChange(a)}})]})})})]})]}),ee=l.object({firstName:l.string().min(1,{message:"First name required"}),lastName:l.string().min(1,{message:"Last name required"}),email:l.string().min(1,{message:"Email required"}).email({message:"Invalid email"}),dialCode:l.string().min(1,{message:"Please select your country code"}),phoneNumber:l.string().min(1,{message:"Please input your mobile number"}),country:l.string().min(1,{message:"Please select a country"}),address:l.string().min(1,{message:"Addrress required"}),postcode:l.string().min(1,{message:"Postcode required"}),city:l.string().min(1,{message:"City required"}),img:l.string(),tags:l.array(l.object({value:l.string(),label:l.string()}))}),se=r=>{const{onFormSubmit:s,defaultValues:a={},newCustomer:o=!1,children:c}=r,{handleSubmit:d,reset:i,formState:{errors:t},control:n}=L({defaultValues:{banAccount:!1,accountVerified:!0,...a},resolver:M(ee)});g.useEffect(()=>{A(a)||i(a)},[JSON.stringify(a)]);const j=O=>{s==null||s(O)};return e.jsxs(D,{className:"flex w-full h-full",containerClassName:"flex flex-col w-full justify-between",onSubmit:d(j),children:[e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"gap-4 flex flex-col flex-auto",children:[e.jsx(H,{control:n,errors:t}),e.jsx(W,{control:n,errors:t})]}),e.jsxs("div",{className:"md:w-[370px] gap-4 flex flex-col",children:[e.jsx(Z,{control:n,errors:t}),e.jsx(Y,{control:n,errors:t}),!o&&e.jsx(_,{control:n,errors:t})]})]})}),e.jsx(I,{children:c})]})},Ye=()=>{const r=F(),[s,a]=g.useState(!1),[o,c]=g.useState(!1),d=async j=>{console.log("Submitted values",j),c(!0),await R(800),c(!1),v.push(e.jsx(N,{type:"success",children:"Customer created!"}),{placement:"top-center"}),r("/concepts/customers/customer-list")},i=()=>{a(!0),v.push(e.jsx(N,{type:"success",children:"Customer discardd!"}),{placement:"top-center"}),r("/concepts/customers/customer-list")},t=()=>{a(!0)},n=()=>{a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(se,{newCustomer:!0,defaultValues:{firstName:"",lastName:"",email:"",img:"",phoneNumber:"",dialCode:"",country:"",address:"",city:"",postcode:"",tags:[]},onFormSubmit:d,children:e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between px-8",children:[e.jsx("span",{}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"ltr:mr-3 rtl:ml-3",type:"button",customColorClass:()=>"border-error ring-1 ring-error text-error hover:border-error hover:ring-error hover:text-error bg-transparent",icon:e.jsx($,{}),onClick:t,children:"Descartar"}),e.jsx(f,{variant:"solid",type:"submit",loading:o,children:"Criar"})]})]})})}),e.jsx(P,{isOpen:s,type:"danger",title:"Discard changes",onClose:n,onRequestClose:n,onCancel:n,onConfirm:i,children:e.jsxs("p",{children:["Are you sure you want discard this? This action can't be undo."," "]})})]})};export{Ye as default};
