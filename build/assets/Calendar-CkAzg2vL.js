import{M as m,j as c,v as j,r as S,Z as fe}from"./index-C607L3NO.js";import{a as ve}from"./useControllableState-Z-3G6vqG.js";import{r as ke,s as Ne}from"./CloseButton-BXcBQvwe.js";function ce({date:n,minDate:t,maxDate:a}){const e=t instanceof Date,s=a instanceof Date;if(!s&&!e)return!0;const o=m(n).endOf("month"),r=m(n).startOf("month"),i=s?r.isBefore(a):!0,u=e?o.isAfter(t):!0;return i&&u}const le=n=>{const{hasNext:t,hasPrevious:a,onNext:e,onPrevious:s,onNextLevel:o,label:r,nextLevelDisabled:i,nextLabel:u,previousLabel:h,preventLevelFocus:D=!1,preventFocus:d,children:b,className:l,...g}=n,w=b||c.jsx("button",{className:"picker-header-label",disabled:i,tabIndex:D?-1:0,type:"button",onClick:o,onMouseDown:f=>d&&f.preventDefault(),children:r});return c.jsx("div",{className:j("picker-header flex items-center justify-between mb-2 border-b border-gray-200 dark:border-gray-700 pb-2",l),...g,children:c.jsxs("div",{className:"flex justify-between w-full items-center rtl:flex-row-reverse",children:[c.jsx("button",{type:"button",className:j("picker-direction-button",!a&&"opacity-0 cursor-default"),disabled:!a,"aria-label":h,onClick:s,onMouseDown:f=>d&&f.preventDefault(),children:c.jsx(ke,{})}),w,c.jsx("button",{type:"button",className:j("picker-direction-button",!t&&"opacity-0 cursor-default"),disabled:!t,"aria-label":u,onClick:e,onMouseDown:f=>d&&f.preventDefault(),children:c.jsx(Ne,{})})]})})};function Re({focusable:n,hasValue:t,selected:a,firstInMonth:e}){return n?t?a?0:-1:e?0:-1:-1}const he=S.forwardRef((n,t)=>{const{className:a,value:e,selected:s,weekend:o,outOfMonth:r,onMouseEnter:i,hasValue:u,firstInRange:h,lastInRange:D,inRange:d,isToday:b,firstInMonth:l,focusable:g,hideOutOfMonthDates:p,renderDay:w,disabled:f,...I}=n;return c.jsx("button",{...I,ref:t,type:"button",disabled:f,tabIndex:Re({focusable:g,hasValue:u,selected:s,firstInMonth:l}),className:j("date-picker-cell-content",f&&"date-picker-cell-disabled",b&&"ring-1 ring-inset ring-primary",o&&!f&&"date-picker-cell-weekend",r&&!f&&"date-picker-other-month",r&&p&&"d-none",!r&&!f&&!s&&"date-picker-cell-current-month",!f&&!s&&!d&&"date-picker-cell-hoverable",s&&!f&&"date-picker-cell-selected bg-primary text-neutral",d&&!f&&!h&&!D&&!s&&"bg-primary-subtle",!d&&!h&&!D&&"rounded-full",d&&b&&"date-picker-cell-inrange-today",h&&!f&&"date-picker-cell-selected-start",D&&!f&&"date-picker-cell-selected-end",a),onMouseEnter:v=>i(e,v),children:typeof w=="function"?w(e):e==null?void 0:e.getDate()})});he.displayName="Day";function X(n,t){return m(new Date(n,1,1)).format(t)}function je(n){const t=n-n%10-1,a=[];for(let e=0;e<12;e+=1){const s=t+e;a.push(s)}return a}function Ye(n,t="monday"){const a=new Date(n),e=a.getDay(),s=t==="sunday",o=7-(s?e+1:e);return(s&&e!==6||e!==0)&&a.setDate(a.getDate()+o),a}function ye(n,t="monday"){const a=new Date(n),e=a.getDay()||7,s=t==="sunday",o=s?e:e-1;return(s&&e!==0||e!==1)&&a.setHours(-24*o),a}function Le(n,t="monday"){const a=n.getMonth(),e=new Date(n.getFullYear(),a,1),s=new Date(n.getFullYear(),n.getMonth()+1,0),o=Ye(s,t),r=ye(e,t),i=[];for(;r<=o;){const u=[];for(let h=0;h<7;h+=1)u.push(new Date(r)),r.setDate(r.getDate()+1);i.push(u)}return i}function Ce(n,t="MMM"){const a=[],e=new Date(2021,0,1);for(let s=0;s<12;s+=1)a.push(m(e).locale(n).format(t)),e.setMonth(e.getMonth()+1);return a}function Oe(n,t="monday",a="dd"){const e=[],s=ye(new Date,t);for(let o=0;o<7;o+=1)e.push(m(s).locale(n).format(a)),s.setDate(s.getDate()+1);return e}function me(n,t){return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()}function B(n,t){return me(n,t)&&n.getDate()===t.getDate()}function Fe(n,t=[0,6]){return t.includes(n.getDay())}function Ie(n,t){return!me(n,t)}function Ae({minDate:n,maxDate:t,disableDate:a,disableOutOfMonth:e,date:s,outOfMonth:o}){const r=t instanceof Date&&m(t).isBefore(s,"day"),i=n instanceof Date&&m(n).isAfter(s,"day"),u=typeof a=="function"&&a(s);return r||i||u||!!e&&!!o}function Se(n,t){const a=Array.isArray(t)&&t.every(i=>i instanceof Date),e=a&&[m(t[0]).subtract(1,"day"),m(t[1]).add(1,"day")],s=a&&B(n,t[0]),o=a&&B(n,t[1]),r=a&&m(n).isAfter(e[0],"day")&&m(n).isBefore(e[1],"day");return{firstInRange:s,lastInRange:o,inRange:r,selectedInRange:s||o}}function ue(n){const{date:t,month:a,hasValue:e,minDate:s,maxDate:o,value:r,disableDate:i,disableOutOfMonth:u,range:h,weekendDays:D}=n,d=Ie(t,a),b=e&&(Array.isArray(r)?r.some(f=>B(f,t)):B(t,r)),{inRange:l,lastInRange:g,firstInRange:p,selectedInRange:w}=Se(t,h);return{disabled:Ae({minDate:s,maxDate:o,disableDate:i,disableOutOfMonth:u,date:t,outOfMonth:d}),weekend:Fe(t,D),selectedInRange:w,selected:b,inRange:l,firstInRange:p,lastInRange:g,outOfMonth:d}}const Q=()=>!1,De=S.forwardRef((n,t)=>{const{className:a,month:e,value:s,onChange:o,disableOutOfMonth:r=!1,locale:i,dayClassName:u,dayStyle:h,minDate:D,maxDate:d,disableDate:b,onDayMouseEnter:l,range:g,hideWeekdays:p=!1,fullWidth:w=!1,preventFocus:f=!1,focusable:I=!0,firstDayOfWeek:v="monday",onDayKeyDown:k,daysRefs:C,hideOutOfMonthDates:H=!1,isDateInRange:Y=Q,isDateFirstInRange:E=Q,isDateLastInRange:A=Q,renderDay:_,weekdayLabelFormat:V,weekendDays:ee=[0,6],...te}=n,{locale:Z}=fe(),ne=i||Z,q=Le(e,v),ae=Oe(ne,v,V).map(L=>c.jsx("th",{className:"week-day-cell",children:c.jsx("span",{className:"week-day-cell-content",children:L})},L)),G=Array.isArray(s)?s.every(L=>L instanceof Date):s instanceof Date,se=s instanceof Date&&m(s).isAfter(m(e).startOf("month"))&&m(s).isBefore(m(e).endOf("month")),J={month:e,hasValue:G,minDate:D,maxDate:d,value:s,disableDate:b,disableOutOfMonth:r,range:g,weekendDays:ee},U=S.useMemo(()=>q.flatMap(L=>L).find(L=>{const M=ue({...J,date:L});return!M.disabled&&!M.outOfMonth})||m(e).startOf("month").toDate(),[]),K=q.map((L,M)=>{const O=L.map((N,T)=>{const x=ue({...J,date:N}),oe={rowIndex:M,cellIndex:T,date:N};return c.jsx("td",{className:j("date-picker-cell"),children:c.jsx(he,{ref:W=>{C&&(Array.isArray(C[M])||(C[M]=[]),C[M][T]=W)},outOfMonth:x.outOfMonth,weekend:x.weekend,inRange:x.inRange||Y(N,x),firstInRange:x.firstInRange||E(N,x),lastInRange:x.lastInRange||A(N,x),firstInMonth:B(N,U),selected:x.selected||x.selectedInRange,hasValue:se,className:typeof u=="function"?u(N,x):"",style:typeof h=="function"?h(N,x):{},disabled:x.disabled,fullWidth:w,focusable:I,hideOutOfMonthDates:H,renderDay:_,isToday:B(N,new Date),value:N,onClick:()=>typeof o=="function"&&o(N),onMouseDown:W=>f&&W.preventDefault(),onKeyDown:W=>typeof k=="function"&&k(oe,W),onMouseEnter:typeof l=="function"?l:Q})},T)});return c.jsx("tr",{className:j("date-picker-week-cell"),children:O},M)});return c.jsxs("table",{ref:t,className:j("picker-table",a),cellSpacing:"0",...te,children:[!p&&c.jsx("thead",{children:c.jsx("tr",{children:ae})}),c.jsx("tbody",{children:K})]})});De.displayName="Month";function Pe(n){return typeof n!="string"?"":n.charAt(0).toUpperCase()+n.slice(1)}function de({month:n,locale:t,format:a}){return Pe(m(n).locale(t).format(a))}const Be=n=>{const{dateViewCount:t,paginateBy:a,month:e,locale:s,minDate:o,maxDate:r,enableHeaderLabel:i,daysRefs:u,onMonthChange:h,onNextLevel:D,onDayKeyDown:d,className:b,labelFormat:l,weekdayLabelFormat:g,preventFocus:p,renderDay:w,...f}=n,I=m(e).add(t,"months").toDate(),v=m(e).subtract(1,"months").toDate(),k="picker-header-label hover:text-primary",C=Array(t).fill(0).map((H,Y)=>{const E=m(e).add(Y,"months").toDate();return c.jsxs("div",{className:"day-picker",children:[c.jsx(le,{hasNext:Y+1===t&&ce({date:I,minDate:o,maxDate:r}),hasPrevious:Y===0&&ce({date:v,minDate:o,maxDate:r}),className:b,onNext:()=>h(m(e).add(a,"months").toDate()),onPrevious:()=>h(m(e).subtract(a,"months").toDate()),children:c.jsxs("div",{children:[c.jsx("button",{className:j(k),disabled:!i,tabIndex:Y>0?-1:0,type:"button",onClick:()=>D("month"),onMouseDown:A=>p&&A.preventDefault(),children:de({month:E,locale:s,format:(l==null?void 0:l.month)||"MMM"})}),c.jsx("button",{className:j(k),disabled:!i,tabIndex:Y>0?-1:0,type:"button",onClick:()=>D("year"),onMouseDown:A=>p&&A.preventDefault(),children:de({month:E,locale:s,format:(l==null?void 0:l.year)||"YYYY"})})]})}),c.jsx(De,{month:E,daysRefs:u.current[Y],minDate:o,maxDate:r,className:b,locale:s,focusable:Y===0,preventFocus:p,renderDay:w,weekdayLabelFormat:g,onDayKeyDown:(...A)=>d(Y,...A),...f})]},Y)});return c.jsx(c.Fragment,{children:C})},Ee=n=>{const{className:t,value:a,onChange:e,locale:s,year:o,onYearChange:r,onNextLevel:i,minDate:u,maxDate:h,preventFocus:D,monthLabelFormat:d="MMM",yearLabelFormat:b="YYYY",...l}=n,g=Ce(s,d),p=u instanceof Date?u.getFullYear():void 0,w=h instanceof Date?h.getFullYear():void 0,f=g.map((I,v)=>{const k=!ce({date:new Date(o,v),minDate:u,maxDate:h}),C=v===a.month&&o===a.year;return c.jsx("button",{className:j("month-picker-cell",C&&!k?"month-picker-cell-active bg-primary":"text-gray-800 dark:text-gray-100",!C&&!k&&"hover:bg-gray-100",k&&"month-picker-cell-disabled"),disabled:k,type:"button",onClick:()=>e(v),onMouseDown:H=>D&&H.preventDefault(),children:I},I)});return c.jsxs("div",{className:j("month-picker",t),...l,children:[c.jsx(le,{label:X(o,b),hasNext:typeof w=="number"?o<w:!0,hasPrevious:typeof p=="number"?o>p:!0,className:t,nextLabel:"Next year",previousLabel:"Previous year",preventFocus:D,onNext:()=>r(o+1),onPrevious:()=>r(o-1),onNextLevel:i}),c.jsx("div",{className:"month-table",children:f})]})},Te=n=>{const{className:t,value:a,onChange:e,minYear:s,maxYear:o,preventFocus:r,yearLabelFormat:i="YYYY",...u}=n,[h,D]=S.useState(a),d=je(h),b=d.map(l=>{const g=l<s||l>o,p=l===a;return c.jsx("button",{disabled:g,className:j("year-picker-cell",p&&!g?"year-picker-cell-active bg-primary":"text-gray-800 dark:text-gray-100",!p&&!g&&"hover:bg-gray-100",g&&"year-picker-cell-disabled"),type:"button",onClick:()=>e(l),onMouseDown:w=>r&&w.preventDefault(),children:X(l,i)},l)});return c.jsxs("div",{className:j("year-picker",t),...u,children:[c.jsx(le,{nextLevelDisabled:!0,label:`${X(d[0],i)} - ${X(d[d.length-1],i)}`,hasPrevious:typeof s=="number"?s<d[0]:!0,hasNext:typeof o=="number"?o>d[d.length-1]:!0,nextLabel:"Next decade",previousLabel:"Previous decade",preventFocus:r,onNext:()=>D(l=>l+10),onPrevious:()=>D(l=>l-10)}),c.jsx("div",{className:"year-table",children:b})]})},be=S.forwardRef((n,t)=>{const{className:a,dateViewCount:e=1,dayClassName:s,dayStyle:o,defaultMonth:r,defaultView:i="date",disableDate:u,disableOutOfMonth:h,enableHeaderLabel:D=!0,firstDayOfWeek:d="monday",hideOutOfMonthDates:b,hideWeekdays:l,isDateFirstInRange:g,isDateInRange:p,isDateLastInRange:w,labelFormat:f={month:"MMM",year:"YYYY"},locale:I,maxDate:v,minDate:k,month:C,monthLabelFormat:H="MMM",onChange:Y,onDayMouseEnter:E,onMonthChange:A,paginateBy:_=e,preventFocus:V,range:ee,renderDay:te,style:Z,value:ne,weekdayLabelFormat:q="dd",weekendDays:ae,yearLabelFormat:G="YYYY",...se}=n,{locale:J}=fe(),[U,K]=S.useState(i),L=I||J,M=S.useRef(Array(e).fill(0).map(()=>[])),[O,N]=ve({prop:C,defaultProp:r!==void 0?r:new Date,onChange:A}),[T,x]=S.useState(O==null?void 0:O.getFullYear()),[oe,W]=S.useState(O==null?void 0:O.getMonth()),ge=k instanceof Date?k.getFullYear():100,pe=v instanceof Date?v.getFullYear():1e4,ie=6,$=(y,R,F,P=1)=>{const z=["down","up"].includes(y),Me=z?F.rowIndex+(y==="down"?P:-P):F.rowIndex,xe=z?F.cellIndex:F.cellIndex+(y==="right"?P:-P),re=M.current[R][Me][xe];re&&(re.disabled?$(y,R,F,P+1):re.focus())},we=(y,R,F)=>{var P;switch(F.key){case"ArrowDown":{F.preventDefault(),R.rowIndex+1<M.current[y].length&&$("down",y,R);break}case"ArrowUp":{F.preventDefault(),R.rowIndex>0&&$("up",y,R);break}case"ArrowRight":{F.preventDefault(),R.cellIndex!==ie?$("right",y,R):y+1<e&&M.current[y+1][R.rowIndex]&&((P=M.current[y+1][R.rowIndex][0])==null||P.focus());break}case"ArrowLeft":{F.preventDefault(),R.cellIndex!==0?$("left",y,R):y>0&&M.current[y-1][R.rowIndex]&&M.current[y-1][R.rowIndex][ie].focus();break}}};return c.jsxs("div",{ref:t,className:j("picker-view",a),...se,children:[U==="year"&&c.jsx(Te,{value:T,minYear:ge,maxYear:pe,className:a,preventFocus:V,yearLabelFormat:G,onChange:y=>{N(new Date(y,oe,1)),x(y),K("date")}}),U==="month"&&c.jsx(Ee,{value:{month:O.getMonth(),year:O.getFullYear()},year:T,locale:L,minDate:k,maxDate:v,className:a,style:Z,preventFocus:V,yearLabelFormat:G,monthLabelFormat:H,onYearChange:x,onNextLevel:()=>K("year"),onChange:y=>{N(new Date(T,y,1)),W(y),K("date")}}),U==="date"&&c.jsx(Be,{dateViewCount:e,paginateBy:_,month:O,locale:L,minDate:k,maxDate:v,enableHeaderLabel:D,daysRefs:M,style:Z,dayClassName:s,dayStyle:o,disableOutOfMonth:h,disableDate:u,hideWeekdays:l,preventFocus:V,firstDayOfWeek:d,value:ne,range:ee,labelFormat:f,weekdayLabelFormat:q,renderDay:te,hideOutOfMonthDates:b,isDateInRange:p,isDateFirstInRange:g,isDateLastInRange:w,weekendDays:ae,onMonthChange:N,onNextLevel:y=>K(y),onDayKeyDown:we,onChange:Y,onDayMouseEnter:E})]})});be.displayName="CalendarBase";const Ve=n=>{const{multipleSelection:t,value:a,onChange:e,...s}=n,o=r=>{if(!t)return e==null?void 0:e(r);const i=a==null?void 0:a.some(u=>B(u,r));return e==null?void 0:e(i?a==null?void 0:a.filter(u=>!B(u,r)):[...a,r])};return c.jsx(be,{value:a,onChange:o,...s})};export{Ve as C,be as a,Pe as c,B as i};
