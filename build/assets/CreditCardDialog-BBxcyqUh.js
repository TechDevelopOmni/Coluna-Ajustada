import{j as n,r as F}from"./index-C607L3NO.js";import{I as h,z as m,u as y,t as B,F as E,a as c,C as d}from"./index-BsyKxmTm.js";import{B as q}from"./Button-BGNlWC2q.js";import{D as S}from"./Dialog-B2uIaC1M.js";import{a as $,P as H}from"./react-number-format.es-DctIRRPE.js";function C(e){return!!(e||"").match(/\d/)}function M(e){const r=Array.from({length:e.length+1}).map(()=>!0);for(let t=0,s=r.length;t<s;t++)r[t]=!!(C(e[t])||C(e[t-1]));return r}function D(e){return e.replace(/[^0-9]/g,"")}const P=({inputSuffix:e,inputPrefix:r,...t})=>n.jsx(h,{...t,value:t.value,suffix:e,prefix:r}),R=({onValueChange:e,...r})=>n.jsx($,{customInput:P,onValueChange:e,...r}),U=({inputSuffix:e,inputPrefix:r,onValueChange:t,format:s=x=>x,getCaretBoundary:l=M,removeFormatting:g=D,...a})=>n.jsx(R,{inputPrefix:r,inputSuffix:e,format:s,getCaretBoundary:l,removeFormatting:g,onValueChange:t,...a}),V=({inputSuffix:e,inputPrefix:r,...t})=>n.jsx(h,{...t,value:t.value,suffix:e,prefix:r}),k=({onValueChange:e,...r})=>n.jsx(H,{customInput:V,onValueChange:e,...r}),N=({inputSuffix:e,inputPrefix:r,onValueChange:t,...s})=>n.jsx(k,{inputPrefix:r,inputSuffix:e,onValueChange:t,...s});function v(e,r){return e.length===1&&e[0]>r[0]&&(e="0"+e),e.length===2&&(Number(e)===0?e="01":e>r&&(e=r)),e}function A(e){const r=v(e.substring(0,2),"12"),t=v(e.substring(2,4),"31");return r+(t.length?"/"+t:"")}const w=m.object({cardHolderName:m.string().min(1,{message:"Card holder name required"}),ccNumber:m.string().min(1,"Credit card number required").refine(e=>/^(?:4[0-9]{12}(?:[0-9]{3})?|[25][1-7][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/.test(e),"Invalid credit card number"),cardExpiry:m.string().min(1,{message:"Card holder name required"}).refine(e=>/^(0[1-9]|1[0-2])\/?([0-9]{4}|[0-9]{2})$/.test(e),"Invalid Date"),code:m.string().min(1,{message:"Code required"}).refine(e=>/^[0-9]{3}$/.test(e),"Invalid CVV")}),L=({title:e,dialogOpen:r,onDialogClose:t,defaultValues:s,onSubmit:l})=>{var p,b,f,j;const{handleSubmit:g,formState:{errors:a,isSubmitting:x},reset:I,control:u}=y({defaultValues:s,resolver:B(w)});return F.useEffect(()=>{I(s)},[s]),n.jsxs(S,{isOpen:r,onClose:t,onRequestClose:t,children:[n.jsx("h4",{children:e}),n.jsxs(E,{className:"mt-6",onSubmit:g(l),children:[n.jsx(c,{label:"User Name",invalid:!!a.cardHolderName,errorMessage:(p=a.cardHolderName)==null?void 0:p.message,children:n.jsx(d,{name:"cardHolderName",control:u,render:({field:o})=>n.jsx(h,{type:"text",autoComplete:"off",placeholder:"Card holder name",...o})})}),n.jsx(c,{label:"Credit card number",invalid:!!a.ccNumber,errorMessage:(b=a.ccNumber)==null?void 0:b.message,children:n.jsx(d,{name:"ccNumber",control:u,render:({field:o})=>n.jsx(N,{placeholder:"•••• •••• •••• ••••",format:"#### #### #### ####",value:o.value,onValueChange:i=>{o.onChange(i.value)}})})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(c,{label:"Expiration date",invalid:!!a.cardExpiry,errorMessage:(f=a.cardExpiry)==null?void 0:f.message,children:n.jsx(d,{name:"cardExpiry",control:u,render:({field:o})=>n.jsx(U,{placeholder:"••/••",format:A,value:o.value,onValueChange:i=>{o.onChange(i.value)}})})}),n.jsx(c,{label:"CVV",invalid:!!a.code,errorMessage:(j=a.code)==null?void 0:j.message,children:n.jsx(d,{name:"code",control:u,render:({field:o})=>n.jsx(N,{placeholder:"•••",format:"###",value:o.value,onValueChange:i=>{o.onChange(i.value)}})})})]}),n.jsx(q,{block:!0,variant:"solid",type:"submit",loading:x,children:"Update"})]})]})};export{L as C};
