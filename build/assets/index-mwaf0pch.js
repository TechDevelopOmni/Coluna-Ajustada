import{r as P,C as w,j as e,d as C,u as F}from"./index-C607L3NO.js";import{L as G}from"./Logo-yRYQ26VV.js";import{A}from"./Alert-BXBHSJBB.js";import{z as p,u as E,t as B,F as q,a as j,C as b,I as T}from"./index-BsyKxmTm.js";import{B as x}from"./Button-BGNlWC2q.js";import{P as O}from"./PasswordInput-B1UmRDvJ.js";import{u as _,A as y}from"./useTimeOutMessage-BsdweY_i.js";import"./useTimeout-5mLzQ-yb.js";import"./CloseButton-BXcBQvwe.js";import"./StatusIcon-CIHdvxDX.js";import"./isNil-C1sdKuru.js";import"./classNames-BXHP0mo8.js";import"./index-C0Bidem1.js";const L=p.object({email:p.string({required_error:"Please enter your email"}).min(1,{message:"Please enter your email"}),password:p.string({required_error:"Please enter your password"}).min(1,{message:"Please enter your password"})}),H=a=>{var h,g,f;const[i,o]=P.useState(!1),{disableSubmit:l=!1,className:m,setMessage:r,passwordHint:t}=a,{handleSubmit:s,formState:{errors:n},control:c}=E({defaultValues:{email:"admin-01@ecme.com",password:"123Qwe"},resolver:B(L)}),{signIn:v}=w(),S=async d=>{const{email:I,password:k}=d;if(!l){o(!0);const u=await v({email:I,password:k});(u==null?void 0:u.status)==="failed"&&(r==null||r(u.message))}o(!1)};return e.jsx("div",{className:m,children:e.jsxs(q,{onSubmit:s(S),children:[e.jsx(j,{label:"Email",invalid:!!n.email,errorMessage:(h=n.email)==null?void 0:h.message,children:e.jsx(b,{name:"email",control:c,render:({field:d})=>e.jsx(T,{type:"email",placeholder:"Email",autoComplete:"off",...d})})}),e.jsx(j,{label:"Password",invalid:!!n.password,errorMessage:(g=n.password)==null?void 0:g.message,className:C(t&&"mb-0",((f=n.password)==null?void 0:f.message)&&"mb-8"),children:e.jsx(b,{name:"password",control:c,rules:{required:!0},render:({field:d})=>e.jsx(O,{type:"text",placeholder:"Password",autoComplete:"off",...d})})}),t,e.jsx(x,{block:!0,loading:i,variant:"solid",type:"submit",children:i?"Entrando...":"Entrar"})]})})};async function N(){return new Promise(a=>{setTimeout(()=>{a({token:"placeholder_token",user:{id:"placeholder_id",name:"Placeholder User",email:"user@example.com"}})},500)})}async function z(){return await N()}async function Q(){return await N()}const R=({setMessage:a,disableSubmit:i})=>{const{oAuthSignIn:o}=w(),l=async()=>{i||o(async({redirect:r,onSignIn:t})=>{try{const s=await z();if(s){const{token:n,user:c}=s;t({accessToken:n},c),r()}}catch(s){a==null||a((s==null?void 0:s.toString())||"")}})},m=async()=>{i||o(async({redirect:r,onSignIn:t})=>{try{const s=await Q();if(s){const{token:n,user:c}=s;t({accessToken:n},c),r()}}catch(s){a==null||a((s==null?void 0:s.toString())||"")}})};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"flex-1",type:"button",onClick:l,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("img",{className:"h-[25px] w-[25px]",src:"/img/others/google.png",alt:"Google sign in"}),e.jsx("span",{children:"Google"})]})}),e.jsx(x,{className:"flex-1",type:"button",onClick:m,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("img",{className:"h-[25px] w-[25px]",src:"/img/others/github.png",alt:"Google sign in"}),e.jsx("span",{children:"Github"})]})})]})},U=({signUpUrl:a="/sign-up",forgetPasswordUrl:i="/forgot-password",disableSubmit:o})=>{const[l,m]=_(),r=F(t=>t.mode);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx(G,{type:"streamline",mode:r,imgClass:"mx-auto",logoWidth:60})}),e.jsxs("div",{className:"mb-10",children:[e.jsx("h2",{className:"mb-2",children:"Bem-vindo!"}),e.jsx("p",{className:"font-semibold heading-text",children:"Por favor, entrar com suas credenciais!"})]}),l&&e.jsx(A,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx(e.Fragment,{children:l})}),e.jsx(H,{disableSubmit:o,setMessage:m,passwordHint:e.jsx("div",{className:"mb-7 mt-2",children:e.jsx(y,{to:i,className:"font-semibold heading-text mt-2 underline",themeColor:!1,children:"Esqueceu a Senha?"})})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 flex-1 mt-[1px]"}),e.jsx("p",{className:"font-semibold heading-text",children:"ou continue com"}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 flex-1 mt-[1px]"})]}),e.jsx(R,{disableSubmit:o,setMessage:m})]}),e.jsx("div",{children:e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("span",{children:["Novo por aqui?"," "]}),e.jsx(y,{to:a,className:"heading-text font-bold",themeColor:!1,children:"Assine agora."})]})})]})},re=()=>e.jsx(U,{});export{U as SignInBase,re as default};
