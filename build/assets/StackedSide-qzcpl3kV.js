import{r as k,i as p,j as t,a as g,b,H as T,S as R,d as H,D as E,e as M,u as v,f as w,h as L,k as A,l as V,m as O}from"./index-C607L3NO.js";import{L as U}from"./Logo-yRYQ26VV.js";import{M as N}from"./index-BXJiQU6B.js";import{S as C}from"./ScrollBar-BqfB9u64.js";import{u as $,N as F,A as P,n as K,a as Y,b as B,H as G,M as W,U as q}from"./UserProfileDropdown-BCfgXiBR.js";import{V as z}from"./VerticalMenuContent-CzlPlfaA.js";import{H as J,a as Q}from"./CloseButton-BXcBQvwe.js";import{u as I}from"./NavToggle-DazSX8r5.js";import{L as X}from"./LayoutBase-DMqWIViX.js";import"./index-DXXL45do.js";import"./index-DQXJF41S.js";import"./toString-Bwyjzsoc.js";import"./useUniqueId-Dupj_QGJ.js";import"./uniqueId-h1-Q-Q6x.js";import"./_getPrototype-DgXCYaqH.js";import"./Drawer-BmNDlxuy.js";import"./index-Bx_zRB3i.js";import"./index-Dw6USHNV.js";import"./useMergeRef-DOQ7ycPl.js";import"./index-C0Bidem1.js";import"./index-DyvKvQJa.js";import"./isNil-C1sdKuru.js";import"./useUncertainRef-Cr4JDrTD.js";import"./classNames-BXHP0mo8.js";const Z=r=>{const{onChange:a,routeKey:s,activeKeys:l,onSetActiveKey:c,direction:d,navigationTree:i,userAuthority:o,mode:m,selectedMenu:u,t:y,...x}=r,{includedRouteTree:n}=$(i,s),f=({key:e,title:h,menu:_,translateKey:D})=>{a({title:h,menu:_,translateKey:D}),c([e])},S=({key:e})=>{a({}),c([e])};k.useEffect(()=>{n.type!==F&&!p(n)&&a({key:n.key,title:n.title,menu:n.subMenu,translateKey:n.translateKey})},[n.key]);const j=l&&l.length>0?l:p(u)?[]:[n.key];return t.jsxs("div",{...x,children:[t.jsx(g,{to:b.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:T},children:t.jsx(U,{imgClass:"max-h-10",mode:m,type:"streamline",className:R})}),t.jsx(C,{autoHide:!0,direction:d,children:t.jsx(N,{className:"px-4 pb-4",defaultActiveKeys:j,children:i.map(e=>t.jsx(P,{authority:e.authority,userAuthority:o,children:t.jsx("div",{title:y(e.translateKey,e.title),children:e.subMenu&&e.subMenu.length>0?t.jsx(N.MenuItem,{eventKey:e.key,className:"mb-2",onSelect:()=>f({key:e.key,title:e.title,menu:e.subMenu,translateKey:e.translateKey}),children:t.jsx("div",{className:"text-2xl",children:K[e.icon]})}):t.jsx(g,{to:e.path,className:"flex items-center h-full w-full",onClick:()=>S({key:e.key}),children:t.jsx(N.MenuItem,{eventKey:e.key,className:"mb-2",children:t.jsx("div",{className:"text-2xl",children:K[e.icon]})})})})},e.key))})})]})},ee=r=>{const{className:a,title:s,menu:l,routeKey:c,onCollapse:d,direction:i,translationSetup:o,userAuthority:m,...u}=r,y=()=>{d()};return t.jsxs("div",{className:H("h-full",a),...u,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:T},children:[t.jsx("h5",{className:"font-bold",children:s}),t.jsxs("button",{type:"button",className:"close-button",onClick:y,children:[i===E&&t.jsx(J,{}),i===M&&t.jsx(Q,{})]})]}),t.jsx(C,{autoHide:!0,direction:i,children:t.jsx(z,{routeKey:c,navigationTree:l,translationSetup:o,userAuthority:m})})]})},te={width:V},se=({translationSetup:r=!0})=>{const{t:a}=Y(!r),[s,l]=k.useState({}),[c,d]=k.useState([]),i=v(e=>e.mode),o=v(e=>e.direction),m=w(e=>e.currentRouteKey),u=L(e=>e.user.authority),{larger:y}=I(),x=(e,h)=>`${e}-${h}`,n=e=>{l(e)},f=()=>{l({}),d([])},S=e=>{d(e)},j=()=>{let e={};const h=`${-A}px`;return o===E&&(e={marginLeft:h}),o===M&&(e={marginRight:h}),e};return t.jsx(t.Fragment,{children:y.md&&t.jsxs("div",{className:"stacked-side-nav",children:[t.jsx(Z,{className:`stacked-side-nav-mini ${x("stacked-side-nav-mini",i)}`,style:te,routeKey:m,activeKeys:c,mode:i,direction:o,navigationTree:B,userAuthority:u||[],selectedMenu:s,t:a,onChange:n,onSetActiveKey:S}),t.jsx("div",{className:`stacked-side-nav-secondary ${x("stacked-side-nav-secondary",i)}`,style:{width:A,...p(s)?j():{}},children:!p(s)&&t.jsx(ee,{title:a(s.translateKey,s.title),menu:s.menu,routeKey:m,direction:o,translationSetup:r,userAuthority:u||[],onCollapse:f})})]})})},Ee=({children:r})=>{const{larger:a,smaller:s}=I();return t.jsx(X,{type:O,className:"app-layout-stacked-side flex flex-auto flex-col",children:t.jsxs("div",{className:"flex flex-auto min-w-0",children:[a.lg&&t.jsx(se,{}),t.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[t.jsx(G,{className:"shadow dark:shadow-2xl",headerStart:t.jsx(t.Fragment,{children:s.lg&&t.jsx(W,{})}),headerEnd:t.jsx(t.Fragment,{children:t.jsx(q,{hoverable:!1})})}),t.jsx("div",{className:"h-full flex flex-auto flex-col",children:r})]})]})})};export{Ee as default};
