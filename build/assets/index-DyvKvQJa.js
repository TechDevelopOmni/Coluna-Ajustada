import{r as n,v as O,j as e,Z as _,a7 as Ie}from"./index-C607L3NO.js";import{k as z,Q,R as Ce,a as Ne}from"./toString-Bwyjzsoc.js";import{i as W}from"./isNil-C1sdKuru.js";import{u as Z}from"./useUncertainRef-Cr4JDrTD.js";import{u as B}from"./useUniqueId-Dupj_QGJ.js";import{c as T}from"./classNames-BXHP0mo8.js";import{M as G}from"./index-DXXL45do.js";import{u as J,a as be,b as H,c as De,d as we,g as Fe,h as ye,i as Re,j as Pe,k as Te,l as Ee,m as Me,n as ke,p as Se,q as He,r as Ae,t as Ke,v as Ue,w as Le,f as Ye,s as $e,e as qe,F as X}from"./useMergeRef-DOQ7ycPl.js";const A=n.createContext({}),Oe=A.Provider,Ve=({placement:a,children:o})=>a&&a.includes("right")?e.jsxs(e.Fragment,{children:[o,e.jsx(z,{})]}):a&&a.includes("left")?e.jsxs(e.Fragment,{children:[e.jsx(Q,{}),o]}):a&&a.includes("right")?e.jsxs(e.Fragment,{children:[o,e.jsx(Ce,{})]}):e.jsxs(e.Fragment,{children:[o,e.jsx(Ne,{})]}),ee=n.forwardRef((a,o)=>{const{className:u,renderTitle:i,children:v,placement:p="bottom-start",disabled:h,toggleClassName:I,...l}=a,c=O("dropdown-toggle",u,I,h&&"dropdown-toggle-disabled"),t=O(c,"dropdown-toggle-default");return i?e.jsx("div",{className:c,...l,ref:o,children:i}):e.jsx("div",{ref:o,className:t,...l,children:e.jsx("span",{className:"flex items-center gap-1",children:e.jsx(Ve,{placement:p,children:v})})})});ee.displayName="DropdownToggle";const se=n.forwardRef((a,o)=>{const{asElement:u="li",children:i,active:v,disabled:p,className:h,style:I,eventKey:l,onSelect:f,...s}=a,{direction:c}=_(),t=n.useContext(A),x=Z(o),g=B("menu-item-"),D=v||!W(t==null?void 0:t.activeKey)&&(t==null?void 0:t.activeKey)===l;return e.jsx("ul",{style:I,className:"relative",...s,children:e.jsxs(G,{ref:x,disabled:p,asElement:u,id:g,isActive:D,eventKey:l,className:T("dropdown-submenu-item",h),onSelect:f,children:[e.jsx("span",{children:i}),c==="rtl"?e.jsx(Q,{}):e.jsx(z,{})]})})});se.displayName="DropdownSubMenu";const k=n.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1});k.Provider;const E=n.forwardRef((a,o)=>{const{children:u,title:i,renderTitle:v,disabled:p,toggleClassName:h,menuClass:I,placement:l,trigger:f="click",onOpen:s,...c}=a,[t,x]=n.useState(!1),[g,D]=n.useState(!1),[w,F]=n.useState(null),M=n.useRef([]),j=n.useRef([]),{direction:y}=_(),R=n.useContext(k),m=J(),C=be(),r=H(),K=De(),N=r!=null,U=d=>{p||(x(d),s==null||s(d))},re=()=>y==="ltr"?"bottom-start":"bottom-end",ie=()=>y==="ltr"?"right-start":"left-start",{floatingStyles:le,refs:L,context:b}=we({nodeId:C,open:t,onOpenChange:d=>{U(d)},placement:l||(N?ie():re()),middleware:[Ye(),$e()],whileElementsMounted:qe}),{isMounted:ce,styles:de}=Fe(b,{common:({side:d})=>({transformOrigin:{top:"bottom",bottom:"top",left:"right",right:"left"}[d]}),initial:{transform:"translateY(-5%)",opacity:0},duration:200,open:{opacity:1,transform:"translateY(0%)"},close:{opacity:0,transform:"translateY(-5%)"}}),ue=ye(b,{enabled:N||f==="hover",delay:{open:75},handleClose:Re({blockPointerEvents:!0})}),me=Pe(b,{event:"mousedown",toggle:!N,ignoreMouse:N}),fe=Te(b,{role:"menu"}),ge=Ee(b,{bubbles:!0}),pe=Me(b,{listRef:M,activeIndex:w,nested:N,onNavigate:F}),xe=ke(b,{listRef:j,onMatch:t?F:void 0,activeIndex:w}),{getReferenceProps:ve,getFloatingProps:he,getItemProps:je}=Se([ue,fe,ge,pe,xe,...f==="click"?[me]:[]]);n.useEffect(()=>{if(!m)return;function d(){x(!1),s==null||s(!1)}function P(q){q.nodeId!==C&&q.parentId===r&&(x(!1),s==null||s(!1))}return m.events.on("click",d),m.events.on("menuopen",P),()=>{m.events.off("click",d),m.events.off("menuopen",P)}},[m,C,r]),n.useEffect(()=>{t&&m&&m.events.emit("menuopen",{parentId:r,nodeId:C})},[m,t,C,r]);const Y=He([L.setReference,K.ref,o]);n.useImperativeHandle(o,()=>({handleDropdownOpen:()=>{x(!0),s==null||s(!0)},handleDropdownClose:()=>{x(!1),s==null||s(!1)}}),[s]);const $={...ve(R.getItemProps({...c,onFocus(d){var P;(P=c.onFocus)==null||P.call(c,d),D(!1),R.setHasFocusInside(!0)}})),...f==="context"?{onContextMenu:d=>{d.preventDefault(),U(!0)}}:{}};return e.jsxs(Ae,{id:C,children:[N?e.jsx("li",{ref:Y,tabIndex:R.activeIndex===K.index?0:-1,"data-open":t?"":void 0,"data-nested":"","data-focus-inside":g?"":void 0,className:T(h,"outline-none"),...$,children:e.jsx(se,{children:v||i})}):e.jsx(ee,{ref:Y,role:"menuitem","data-open":t?"":void 0,"data-focus-inside":g?"":void 0,className:T(h),disabled:p,placement:l,renderTitle:v,...$,children:i}),e.jsx(k.Provider,{value:{activeIndex:w,setActiveIndex:F,getItemProps:je,setHasFocusInside:D,isOpen:t},children:e.jsx(Ke,{elementsRef:M,labelsRef:j,children:ce&&e.jsx(Ue,{children:e.jsx(Le,{context:b,modal:!1,initialFocus:N?-1:0,returnFocus:!N,children:e.jsx("div",{ref:L.setFloating,style:le,...he(),className:"outline-none z-30",children:e.jsx("ul",{className:T("dropdown-menu min-w-[160px]",I),style:de,children:u})})})})})})]})});E.displayName="DropdownMenu";const te=n.forwardRef(({activeKey:a,...o},u)=>H()===null?e.jsx(Oe,{value:{activeKey:a},children:e.jsx(X,{children:e.jsx(E,{...o,ref:u})})}):e.jsx(E,{...o,ref:u}));te.displayName="Dropdown";const{DEFAULT:_e,DIVIDER:ze,HEADER:V,CUSTOM:S}=Ie,ne=n.forwardRef((a,o)=>{const{asElement:u="li",children:i,active:v,disabled:p,className:h,style:I,eventKey:l,onSelect:f,onClick:s,onFocus:c,variant:t=_e,...x}=a,g=n.useContext(A),D=n.useContext(k),w=Z(o),F=B("menu-item-"),M=v||!W(g==null?void 0:g.activeKey)&&(g==null?void 0:g.activeKey)===l,j=J(),y=n.useCallback(r=>{f==null||f(l||"",r),s==null||s(r)},[l,s,f]),R=n.useCallback(r=>{p||(y(r),j==null||j.events.emit("click"))},[p,y,j==null?void 0:j.events]),m={...D.getItemProps({onClick(r){R(r)},onFocus(r){c==null||c(r),D.setHasFocusInside(!0)}})};if(t===ze||t===V||t===S)return e.jsx(u,{ref:w,id:F,style:I,className:T(`menu-item-${t}`,h),...t===S?m:{},...x,children:(t===V||t===S)&&i});function C(){return n.isValidElement(i)?n.cloneElement(i):i}return e.jsx(G,{ref:w,asElement:u,style:I,isActive:M,disabled:p,eventKey:l,className:h,...m,...x,children:C()})});ne.displayName="DropdownItem";const oe=n.forwardRef((a,o)=>H()===null?e.jsx(X,{children:e.jsx(E,{...a,ref:o})}):e.jsx(E,{...a,ref:o}));oe.displayName="DropdownSub";const ae=te;ae.Item=ne;ae.Menu=oe;export{ae as D};
