import{r as y,j as e}from"./index-C607L3NO.js";import{B as p}from"./Button-BGNlWC2q.js";import{U}from"./Upload-BIQuS-bs.js";import{z as n,u as q,F as z,C as i,a as l,I as c,t as R}from"./index-BsyKxmTm.js";import{S,O as A,c as J}from"./Select-BFKD9t5_.js";import{A as g}from"./index-Dw6USHNV.js";import{N as T}from"./NumericInput-B59N_2AO.js";import{c as u}from"./countries.constant-ZY8wRTuX.js";import{a as $}from"./AccontsService-Buei5PPp.js";import{s as k}from"./sleep-BvINh1mj.js";import{u as G}from"./index-XbpPjDmP.js";import{f as H}from"./CloseButton-BXcBQvwe.js";import{U as V}from"./toString-Bwyjzsoc.js";import"./classNames-BXHP0mo8.js";import"./cloneDeep-SyEe5GSS.js";import"./_getPrototype-DgXCYaqH.js";import"./toast-CDPb8hdy.js";import"./useTimeout-5mLzQ-yb.js";import"./StatusIcon-CIHdvxDX.js";import"./isNil-C1sdKuru.js";import"./index-C0Bidem1.js";import"./useMergeRef-DOQ7ycPl.js";import"./react-number-format.es-DctIRRPE.js";const{Control:W}=J,D=n.object({firstName:n.string().min(1,{message:"First name required"}),lastName:n.string().min(1,{message:"Last name required"}),email:n.string().min(1,{message:"Email required"}).email({message:"Invalid email"}),dialCode:n.string().min(1,{message:"Please select your country code"}),phoneNumber:n.string().min(1,{message:"Please input your mobile number"}),country:n.string().min(1,{message:"Please select a country"}),address:n.string().min(1,{message:"Addrress required"}),postcode:n.string().min(1,{message:"Postcode required"}),city:n.string().min(1,{message:"City required"}),img:n.string()}),B=o=>e.jsx(A,{...o,customLabel:(m,d)=>e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(g,{shape:"circle",size:20,src:`/img/countries/${m.value}.png`}),o.variant==="country"&&e.jsx("span",{children:d}),o.variant==="phone"&&e.jsx("span",{children:m.dialCode})]})}),O=({children:o,...m})=>{const d=m.getValue()[0];return e.jsxs(W,{...m,children:[d&&e.jsx(g,{className:"ltr:ml-4 rtl:mr-4",shape:"circle",size:20,src:`/img/countries/${d.value}.png`}),o]})},je=()=>{var x,h,j,f,v,C,b,N;const{data:o,mutate:m}=G("/api/settings/profile/",()=>$(),{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1}),d=y.useMemo(()=>JSON.parse(JSON.stringify(u)).map(a=>(a.label=a.dialCode,a)),[]),w=s=>{let a=!0;const F=["image/jpeg","image/png"];if(s)for(const I of s)F.includes(I.type)||(a="Please upload a .jpeg or .png file!");return a},{handleSubmit:L,reset:P,formState:{errors:r,isSubmitting:E},control:t}=q({resolver:R(D)});y.useEffect(()=>{o&&P(o)},[o]);const M=async s=>{await k(500),o&&m({...o,...s},!1)};return e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"mb-8",children:"Informações pessoais"}),e.jsxs(z,{onSubmit:L(M),children:[e.jsx("div",{className:"mb-8",children:e.jsx(i,{name:"img",control:t,render:({field:s})=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{size:90,className:"border-4 border-white bg-gray-100 text-gray-300 shadow-lg",icon:e.jsx(H,{}),src:s.value}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{showList:!1,uploadLimit:1,beforeUpload:w,onChange:a=>{a.length>0&&s.onChange(URL.createObjectURL(a[0]))},children:e.jsx(p,{variant:"solid",size:"sm",type:"button",icon:e.jsx(V,{}),children:"Adicionar Imagem"})}),e.jsx(p,{size:"sm",type:"button",onClick:()=>{s.onChange("")},children:"Remover"})]})]})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Nome",invalid:!!r.firstName,errorMessage:(x=r.firstName)==null?void 0:x.message,children:e.jsx(i,{name:"firstName",control:t,render:({field:s})=>e.jsx(c,{type:"text",autoComplete:"off",placeholder:"Nome",...s})})}),e.jsx(l,{label:"Sobrenome",invalid:!!r.lastName,errorMessage:(h=r.lastName)==null?void 0:h.message,children:e.jsx(i,{name:"lastName",control:t,render:({field:s})=>e.jsx(c,{type:"text",autoComplete:"off",placeholder:"Sobrenome",...s})})})]}),e.jsx(l,{label:"E-mail",invalid:!!r.email,errorMessage:(j=r.email)==null?void 0:j.message,children:e.jsx(i,{name:"email",control:t,render:({field:s})=>e.jsx(c,{type:"email",autoComplete:"off",placeholder:"E-mail",...s})})}),e.jsxs("div",{className:"flex items-end gap-4 w-full mb-6",children:[e.jsxs(l,{invalid:!!r.phoneNumber||!!r.dialCode,children:[e.jsx("label",{className:"form-label mb-2",children:"Nº Celular"}),e.jsx(i,{name:"dialCode",control:t,render:({field:s})=>e.jsx(S,{options:d,...s,className:"w-[150px]",components:{Option:a=>e.jsx(B,{variant:"phone",...a}),Control:O},placeholder:"",value:d.filter(a=>a.dialCode===s.value),onChange:a=>s.onChange(a==null?void 0:a.dialCode)})})]}),e.jsx(l,{className:"w-full",invalid:!!r.phoneNumber||!!r.dialCode,errorMessage:(f=r.phoneNumber)==null?void 0:f.message,children:e.jsx(i,{name:"phoneNumber",control:t,render:({field:s})=>e.jsx(T,{autoComplete:"off",placeholder:"dd + 123456789",value:s.value,onChange:s.onChange,onBlur:s.onBlur})})})]}),e.jsx("h4",{className:"mb-6",children:"Address information"}),e.jsx(l,{label:"Pais",invalid:!!r.country,errorMessage:(v=r.country)==null?void 0:v.message,children:e.jsx(i,{name:"country",control:t,render:({field:s})=>e.jsx(S,{options:u,...s,components:{Option:a=>e.jsx(B,{variant:"country",...a}),Control:O},placeholder:"",value:u.filter(a=>a.value===s.value),onChange:a=>s.onChange(a==null?void 0:a.value)})})}),e.jsx(l,{label:"Endereço",invalid:!!r.address,errorMessage:(C=r.address)==null?void 0:C.message,children:e.jsx(i,{name:"address",control:t,render:({field:s})=>e.jsx(c,{type:"text",autoComplete:"off",placeholder:"Endereço",...s})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Cidade",invalid:!!r.city,errorMessage:(b=r.city)==null?void 0:b.message,children:e.jsx(i,{name:"city",control:t,render:({field:s})=>e.jsx(c,{type:"text",autoComplete:"off",placeholder:"Cidade",...s})})}),e.jsx(l,{label:"CEP",invalid:!!r.postcode,errorMessage:(N=r.postcode)==null?void 0:N.message,children:e.jsx(i,{name:"postcode",control:t,render:({field:s})=>e.jsx(c,{type:"text",autoComplete:"off",placeholder:"000.00-000",...s})})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{variant:"solid",type:"submit",loading:E,children:"Save"})})]})]})};export{je as default};
